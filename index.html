<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kyle Resume Generator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    body {
      margin: 0;
      font-family: 'Inter', system-ui, sans-serif;
      background: #f8fafc;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    .editor {
      width: 440px;
      background: #1e2937;
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow-y: auto;
    }

    .preview {
      flex: 1;
      background: white;
      overflow-y: auto;
      padding: 40px 60px;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
    }

    textarea {
      flex: 1;
      background: #0f172a;
      color: #e2e8f0;
      border: none;
      border-radius: 8px;
      padding: 16px;
      font-family: monospace;
      font-size: 13px;
      resize: none;
    }

    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 14px 24px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 15px;
    }

    button:hover { background: #2563eb; }

    .resume {
      max-width: 8.5in;
      margin: 0 auto;
      background: white;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 0.65in 0.75in;
      font-size: 10.5pt;
      line-height: 1.45;
      color: #1f2937;
    }

    .header {
      text-align: center;
      margin-bottom: 0.45in;
      padding-bottom: 0.3in;
      border-bottom: 3px solid #1e40af;
    }

    h1 {
      font-size: 28pt;
      font-weight: 700;
      color: #1e40af;
      margin-bottom: 6pt;
    }

    .contact {
      font-size: 10.5pt;
      color: #475569;
    }

    .title {
      font-size: 13.5pt;
      font-weight: 600;
      color: #1e40af;
      margin: 14pt 0 10pt;
    }

    h2 {
      font-size: 13pt;
      color: #1e40af;
      border-bottom: 1px solid #e2e8f0;
      padding-bottom: 6pt;
      margin: 24pt 0 12pt;
    }

    ul {
      padding-left: 18pt;
      margin: 8pt 0 16pt;
    }

    li {
      margin-bottom: 7pt;
    }

    .skills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8pt;
    }

    .skill {
      background: #f1f5f9;
      padding: 5px 12px;
      border-radius: 9999px;
      font-size: 10pt;
      font-weight: 500;
    }

    @media print {
      body { background: white; }
      .editor, button { display: none; }
      .resume { box-shadow: none; margin: 0; padding: 0.55in 0.65in; }
    }
  </style>
</head>
<body>

  <div class="editor">
    <h2 style="color:white;">Kyle Resume Generator</h2>
    <p style="color:#cbd5e1; font-size:13px;">Paste your full modular JSON (dataSchema format) below</p>
    
    <textarea id="jsonInput" placeholder='Paste the full JSON here...'></textarea>
    
    <button onclick="renderResume()">Render Resume</button>
    
    <small style="color:#64748b;">Ctrl + P → Save as PDF (Margins: Minimum)</small>
  </div>

  <div class="preview">
    <div id="resumePreview" class="resume">
      <p style="text-align:center; color:#64748b; margin-top:120px;">
        Paste your modular JSON and click "Render Resume"
      </p>
    </div>
  </div>

  <script>
    function renderResume() {
      const input = document.getElementById('jsonInput').value.trim();
      if (!input) {
        alert("Please paste the JSON first");
        return;
      }

      let data;
      try {
        data = JSON.parse(input);
      } catch (e) {
        alert("Invalid JSON. Please check the format.");
        return;
      }

      const preview = document.getElementById('resumePreview');

      // Personal Info
      const pi = data.personalInfo || {};

      let html = `
        <div class="header">
          <h1>${pi.fullName || 'Kyle Amundson'}</h1>
          <div class="contact">
            ${pi.location || ''} • ${pi.email || ''} • ${pi.phone || ''} • ${pi.linkedin || ''}
          </div>
          <div class="title">Senior CRM & Lifecycle Marketing Leader | Email & SMS Strategy | Customer Retention</div>
        </div>

        <!-- Professional Summary (use first one or "base" version) -->
        <section>
          <p>${(data.professionalSummaries && data.professionalSummaries[0] && data.professionalSummaries[0].text) || 'Professional summary not found.'}</p>
        </section>

        <!-- Key Accomplishments -->
        <section>
          <h2>Selected Key Accomplishments</h2>
          <ul id="accomplishments"></ul>
        </section>

        <!-- Technical Skills -->
        <section>
          <h2>Technical Skills</h2>
          <div class="skills" id="skills"></div>
        </section>

        <!-- Experience -->
        <section>
          <h2>Professional Experience</h2>
          <div id="experience"></div>
        </section>

        <!-- Education -->
        <section>
          <h2>Education</h2>
          <div id="education"></div>
        </section>
      `;

      preview.innerHTML = html;

      // Populate Key Accomplishments
      const accList = document.getElementById('accomplishments');
      if (data.keyAccomplishments && data.keyAccomplishments.length) {
        data.keyAccomplishments.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item.text;
          accList.appendChild(li);
        });
      }

      // Populate Skills
      const skillsDiv = document.getElementById('skills');
      if (data.technicalSkills && data.technicalSkills.tools) {
        data.technicalSkills.tools.forEach(skill => {
          const span = document.createElement('span');
          span.className = 'skill';
          span.textContent = skill;
          skillsDiv.appendChild(span);
        });
      }

      // Populate Experience
      const expDiv = document.getElementById('experience');
      if (data.experiences) {
        data.experiences.forEach(job => {
          let bulletsHTML = '';
          if (job.bullets && job.bullets.length) {
            bulletsHTML = '<ul>' + job.bullets.map(b => `<li>${b.text}</li>`).join('') + '</ul>';
          }

          expDiv.innerHTML += `
            <div style="margin-bottom:18pt;">
              <div style="display:flex; justify-content:space-between; margin-bottom:4pt;">
                <strong>${job.company}</strong>
                <span style="color:#64748b;">${job.dates}</span>
              </div>
              <div style="font-style:italic; color:#475569;">${job.title} ${job.location ? '• ' + job.location : ''}</div>
              ${bulletsHTML}
            </div>
          `;
        });
      }

      // Populate Education
      const eduDiv = document.getElementById('education');
      if (data.education) {
        data.education.forEach(edu => {
          eduDiv.innerHTML += `
            <p><strong>${edu.degree}</strong><br>
            ${edu.institution} — ${edu.location || ''} — ${edu.graduationYear}</p>
          `;
        });
      }
    }

    // Keyboard shortcut: Ctrl+Enter to render
    document.getElementById('jsonInput').addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') {
        renderResume();
      }
    });
  </script>
</body>
</html>